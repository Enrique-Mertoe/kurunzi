{%set post = data.post %}
{%set user = post.user %}
{%set info = post.related_info%}
{%set me = user.uid == current_user.uid %}


<div data-tag="{{post.post_id}}" class="feed-item">
    <div class="card card-body">
        <div class="feed-header">
            <div class="feed-user pe-2">
                <div class="avatar">
                    <img class="avatar-img" src="{{user.profile_pic | file_image }}">
                    {%if user.account_type == "p"%}
                    <div class="position-absolute bottom-0 end-0 me-n3">
                        <span class="text-success">
                            <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                 viewBox="0 0 24 24" class="verified-color feather feather-check-circle" title=""
                                 data-toggle="tooltip" data-original-title="Verified User"><path
                                    d="M23,12L20.56,9.22L20.9,5.54L17.29,4.72L15.4,1.54L12,3L8.6,1.54L6.71,4.72L3.1,5.53L3.44,9.21L1,12L3.44,14.78L3.1,18.47L6.71,19.29L8.6,22.47L12,21L15.4,22.46L17.29,19.28L20.9,18.46L20.56,14.78L23,12M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"></path></svg>
                        </span>
                    </div>
                    {%endif%}
                </div>
            </div>
            <div class="feed-h-desc">
                <div class="vstack">
                    {%if post.anonymous%}
                    <div class="hstack align-items-end pointer gap-1">
                        <span class="fw-bold text-capitalize small">{{user.random_name()}}</span>
                    </div>

                    {%else%}
                    <div class="hstack align-items-end pointer gap-1" data-url="{{user.username}}">
                        <span class="fw-bold text-capitalize small">{{user.fullname}}</span> .
                        <span class="text-secondary smaller">@{{user.username}}</span>
                    </div>
                    {%endif%}
                    <div class="hstack gap-2">
                        <span class="smaller feed-time">{{post.posted_on | to_date}}</span>
                        {%if info[0].location%}
                        <span class="fw-bold small text-info">{{info[0].location}}</span>
                        {%endif%}
                    </div>
                </div>
            </div>
            <div class="dropdown">
                <span class="btn" data-bs-toggle="dropdown">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                         viewBox="0 0 24 24" fill="none" stroke="currentColor"
                         stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round"
                         class="feather feather-more-horizontal"><circle cx="12"
                                                                         cy="12"
                                                                         r="1"></circle><circle
                            cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>
                    </svg>
                </span>
                <ul class="dropdown-menu post-menu  dropdown-menu-end">

                    {% if me %}

                    <li class="dropdown-item pointer">
                        <i class="me-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-pencil-square" viewBox="0 0 16 16">
                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                <path fill-rule="evenodd"
                                      d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                            </svg>
                        </i>
                        Edit
                    </li>
                    {%else%}
                    <li class="dropdown-item pointer">
                        <i class="me-1">
                            <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"
                                 class="r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-bnwqim r-lrvibr r-m6rgpd r-1nao33i r-1q142lx">
                                <g>
                                    <path d="M9.5 7c.828 0 1.5 1.119 1.5 2.5S10.328 12 9.5 12 8 10.881 8 9.5 8.672 7 9.5 7zm5 0c.828 0 1.5 1.119 1.5 2.5s-.672 2.5-1.5 2.5S13 10.881 13 9.5 13.672 7 14.5 7zM12 22.25C6.348 22.25 1.75 17.652 1.75 12S6.348 1.75 12 1.75 22.25 6.348 22.25 12 17.652 22.25 12 22.25zm0-18.5c-4.549 0-8.25 3.701-8.25 8.25s3.701 8.25 8.25 8.25 8.25-3.701 8.25-8.25S16.549 3.75 12 3.75zM8.947 17.322l-1.896-.638C7.101 16.534 8.322 13 12 13s4.898 3.533 4.949 3.684l-1.897.633c-.031-.09-.828-2.316-3.051-2.316s-3.021 2.227-3.053 2.322z"></path>
                                </g>
                            </svg>
                        </i>
                        Not Interested
                    </li>
                    <li class="dropdown-item pointer">
                        <i class="me-1">
                            <svg height="16" width="16" viewBox="0 0 24 24" aria-hidden="true"
                                 class="r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-bnwqim r-lrvibr r-m6rgpd r-1nao33i r-1q142lx">
                                <g>
                                    <path d="M3 2h18.61l-3.5 7 3.5 7H5v6H3V2zm2 12h13.38l-2.5-5 2.5-5H5v10z"></path>
                                </g>
                            </svg>
                        </i>
                        Report this post
                    </li>
                    <li data-pst-rmv class="dropdown-item  pointer">
                        <i class="me-1">
                            <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"
                                 class="">
                                <g>
                                    <path d="M12 3.75c-4.55 0-8.25 3.69-8.25 8.25 0 1.92.66 3.68 1.75 5.08L17.09 5.5C15.68 4.4 13.92 3.75 12 3.75zm6.5 3.17L6.92 18.5c1.4 1.1 3.16 1.75 5.08 1.75 4.56 0 8.25-3.69 8.25-8.25 0-1.92-.65-3.68-1.75-5.08zM1.75 12C1.75 6.34 6.34 1.75 12 1.75S22.25 6.34 22.25 12 17.66 22.25 12 22.25 1.75 17.66 1.75 12z"></path>
                                </g>
                            </svg>
                        </i>
                        Block @ {{user.username}}
                    </li>
                    {%endif%}
                    {% if me %}
                    <li data-pst-rmv class="dropdown-item text-danger pointer">
                        <i class="me-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-trash3-fill" viewBox="0 0 16 16">
                                <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"/>
                            </svg>
                        </i>
                        Delete
                    </li>
                    {% endif %}
                </ul>

            </div>
        </div>
        <div class="feed-media">
            {%include "xhr/post/media-list.html"%}
        </div>
        <div class="feed-status">
            <p>{{info[0].status | filter_html | safe}}</p>
        </div>
        <div class="feed-reaction-area vstack">
            <div class="reaction-counter"></div>
            {% include "xhr/post/reaction.html"%}
        </div>
        <div class="feed-comment-area">
            <span class="text-muted smaller">Recent comments</span>
            <div class="comment-list gap-1 vstack">
                <div class="comment-item gap-1 hstack">
                    <div class="avatar placeholder avatar-xs"></div>
                    <span class="fw-bold placeholder px-3"></span>
                    <span class="placeholder px-4"></span>
                    <span class="text-muted placeholder px-2 "></span>
                </div>
            </div>

            <div data-new-comment="" class="feed-add-comment">
                <span>+</span>
                <span>Add comment</span>
            </div>
            <div data-cmt-sec>
                <form class="vstack gap-2">

                    <div class="hstack">
                        <div class="avatar avatar-xs">
                            <img class="avatar-img" src="{{current_user.profile_pic | file_image}}" alt="">
                        </div>
                        <div contenteditable="true" data-placeholder="Add comment"
                             class="form-control smart-input border-0 shadow-none"></div>
                    </div>
                    <div class="justify-content-between px-1 py-1 border-bottom border-top hstack gap-2">
                        <div class="hstack gap-2">
                                    <span class="btn border-0 p-1 shadow-none bg-info-soft-hover text-primary"><svg
                                            xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24"><path fill="#4db3f6"
                                                                      d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"></path></svg></span>
                            <span class="btn border-0 p-1 shadow-none bg-info-soft-hover text-primary">
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="24" height="24"
                                             viewBox="0 0 24 24" class="feather feather-emoticons"><path
                                                d="M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M15.2746538,14.2978292 L16.9105622,15.4483958 C15.7945475,17.0351773 13.9775544,18 12,18 C10.0224456,18 8.20545254,17.0351773 7.08943782,15.4483958 L8.72534624,14.2978292 C9.4707028,15.3575983 10.6804996,16 12,16 C13.3195004,16 14.5292972,15.3575983 15.2746538,14.2978292 Z M14,11 L14,9 L16,9 L16,11 L14,11 Z M8,11 L8,9 L10,9 L10,11 L8,11 Z"></path></svg>
                                    </span>
                            <label class="form-control border-0  hstack">

                                <div class="form-check ms-auto form-switch">
                                    <input value="1" name="commenting" class="form-check-input" type="checkbox"
                                           role="switch"
                                           id="NotiSwitchCheckChecked1">
                                </div>
                                <h6 class="mb-0">keep anonymous</h6>
                            </label>

                        </div>
                        <div class="form-loader">
                            <div class="border-spinner"></div>
                        </div>
                        <button class="rounded-pill px-3 btn btn-success py-1" type="submit">publish</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>